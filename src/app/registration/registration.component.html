<div class="container h-100" align-middle>
  <form [formGroup]="user" (ngSubmit)="onSubmit()" class="row justify-content-center h-100">
    <div class="col-12 col-sm-11 col-md-8 col-lg-6 col-xl-5 col-margin-y">
      <div class="content-container">
        <h3 class="form-group font-weight-bold">
          <label>GSG Registration</label>
        </h3>
        <div class="form-group">
          <label
            for="inputEmail"
            [class.text-danger]="user.controls.email.errors && (!user.controls.email.pristine || user.controls.email.touched)"
          >Email address</label>
          <input
            autofocus
            type="email"
            class="form-control"
            [class.is-invalid]="user.controls.email.errors && (!user.controls.email.pristine || user.controls.email.touched)"
            id="inputEmail"
            placeholder="Enter email"
            formControlName="email"
          >
          <div class="invalid-feedback">
            <span *ngIf="lodGet(user.controls.email.errors, 'required') || lodGet(user.controls.email.errors, 'registration-email-is-required')">Enter email</span>
            <span *ngIf="lodGet(user.controls.email.errors, 'email') || lodGet(user.controls.email.errors, 'registration-email-is-invalid')">Email is invalid</span>
            <span *ngIf="lodGet(user.controls.email.errors, 'registration-email-is-already-taken')">This email is already registered</span>
          </div>
        </div>
        <div class="container px-0">
          <div class="row no-gutters">
            <div class="col-11">
              <div class="row no-gutters">
                <div class="col-12 col-sm-6 pr-3">
                  <div class="form-group">
                    <label
                      for="inputPassword"
                      [class.text-danger]="user.controls.password.errors && (!user.controls.password.pristine || user.controls.password.touched)"
                    >Password</label>
                    <input
                      [type]="!passwordVisible ? 'password' : 'text'"
                      class="form-control"
                      [class.is-invalid]="user.controls.password.errors && (!user.controls.password.pristine || user.controls.password.touched)"
                      id="inputPassword"
                      placeholder="Enter password"
                      formControlName="password"
                      (ngModelChange)="onChangePassword()"
                    >
                    <div class="invalid-feedback">
                      <span *ngIf="lodGet(user.controls.password.errors, 'required') || lodGet(user.controls.password.errors, 'registration-password-is-required')">
                        Enter password
                      </span>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-sm-6 pr-3">
                  <div class="form-group">
                    <label
                      for="inputRepeatedPassword"
                      [class.text-danger]="user.controls.repeatedPassword.errors && (!user.controls.repeatedPassword.pristine || user.controls.repeatedPassword.touched)"
                    >Repeat</label>
                    <input
                      [type]="!passwordVisible ? 'password' : 'text'"
                      class="form-control"
                      [class.is-invalid]="user.controls.repeatedPassword.errors && (!user.controls.repeatedPassword.pristine || user.controls.repeatedPassword.touched)"
                      id="inputRepeatedPassword"
                      placeholder="Repeat password"
                      formControlName="repeatedPassword"
                    >
                    <div class="invalid-feedback">
                      <span *ngIf="lodGet(user.controls.repeatedPassword.errors, 'requiredIf') || lodGet(user.controls.repeatedPassword.errors, 'registration-repeated-password-is-required')">
                        Enter password again
                      </span>
                      <span *ngIf="lodGet(user.controls.repeatedPassword.errors, 'isNotEqualToPassword') || lodGet(user.controls.repeatedPassword.errors, 'registration-repeated-password-is-not-equal-to-password')">
                        Does not match password
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-1 password-visibility-switch">
              <div class="form-group">
                <ng-template [ngIf]="!passwordVisible" [ngIfElse]="passwordNotVisibleIcon">
                  <i class="far fa-eye-slash fa-lg" (click)="passwordVisible = true"></i>
                </ng-template>

                <ng-template #passwordNotVisibleIcon>
                  <i class="far fa-eye fa-lg" (click)="passwordVisible = false"></i>
                </ng-template>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label
            for="inputFirstName"
            [class.text-danger]="user.controls.firstName.errors && (!user.controls.firstName.pristine || user.controls.firstName.touched)"
          >First Name</label>
          <input
            type="text"
            class="form-control is-invalid"
            [class.is-invalid]="user.controls.firstName.errors && (!user.controls.firstName.pristine || user.controls.firstName.touched)"
            id="inputFirstName"
            placeholder="Enter first name"
            formControlName="firstName"
          >
          <div class="invalid-feedback">
            <span *ngIf="lodGet(user.controls.firstName.errors, 'required') || lodGet(user.controls.firstName.errors, 'registration-first-name-is-required')">
              Enter first name
            </span>
          </div>
        </div>
        <div class="form-group">
          <label
            for="inputLastName"
            [class.text-danger]="user.controls.lastName.errors && (!user.controls.lastName.pristine || user.controls.lastName.touched)"
          >Last Name</label>
          <input
            type="text"
            class="form-control is-invalid"
            [class.is-invalid]="user.controls.lastName.errors && (!user.controls.lastName.pristine || user.controls.lastName.touched)"
            id="inputLastName"
            placeholder="Enter last name"
            formControlName="lastName"
          >
          <div class="invalid-feedback">
            <span *ngIf="lodGet(user.controls.lastName.errors, 'required') || lodGet(user.controls.lastName.errors, 'registration-last-name-is-required')">
              Enter last name
            </span>
          </div>
        </div>
        <div class="form-group">
          <label
            for="inputPhoneNumber"
            [class.text-danger]="user.controls.phoneNumber.errors && (!user.controls.phoneNumber.pristine || user.controls.phoneNumber.touched)"
          >Phone Number</label>
          <input
            type="text"
            class="form-control is-invalid"
            [class.is-invalid]="user.controls.phoneNumber.errors && (!user.controls.phoneNumber.pristine || user.controls.phoneNumber.touched)"
            id="inputPhoneNumber"
            placeholder="Enter phone number"
            formControlName="phoneNumber"
          >
          <div class="invalid-feedback">
            <span *ngIf="lodGet(user.controls.phoneNumber.errors, 'invalid') || lodGet(user.controls.phoneNumber.errors, 'registration-phone-number-is-invalid')">
              Phone number is incorrect
            </span>
          </div>
        </div>
        <div class="form-group mb-0">
          <button type="submit" class="btn btn-primary float-right">Register</button>
          <button type="button" class="btn btn-link login-button" routerLink="/login">Login Page</button>
        </div>
      </div>
    </div>
  </form>
</div>

